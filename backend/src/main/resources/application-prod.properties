# =========================
# Production Profile
# =========================
spring.application.name=project-sgc-ultimate-backend

# =========================
# Server Configuration
# =========================
server.port=${SERVER_PORT:8080}
server.error.include-message=never
server.error.include-binding-errors=never
server.error.include-stacktrace=never
server.error.include-exception=false
server.compression.enabled=true
server.compression.mime-types=text/html,text/xml,text/plain,text/css,text/javascript,application/javascript,application/json
server.compression.min-response-size=1024

# =========================
# MongoDB Configuration
# =========================
spring.data.mongodb.uri=${MONGODB_URI:mongodb://localhost:27017/project_sgc_ultimate}
spring.data.mongodb.auto-index-creation=false

# =========================
# JWT Configuration
# =========================
# IMPORTANTE: Usar variable de entorno en producción
jwt.secret=${JWT_SECRET}
jwt.expiration=${JWT_EXPIRATION:86400000}

# =========================
# Logging Configuration
# =========================
# Logs optimizados para producción
logging.level.root=WARN
logging.level.org.springframework.web=WARN
logging.level.org.springframework.security=WARN
logging.level.org.springframework.data.mongodb=WARN
logging.level.com.project_sgc_ultimate=INFO

# Formato de logs estructurado
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} %-5level [%thread] %logger{36} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} %-5level [%thread] %logger{36} - %msg%n

# Archivo de logs con rotación
logging.file.name=logs/sgc-prod.log
logging.file.max-size=50MB
logging.file.max-history=90
logging.file.total-size-cap=1GB

# =========================
# Actuator Configuration
# =========================
# Solo exponer health e info en producción
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=when-authorized
management.endpoint.health.show-components=when-authorized
management.info.env.enabled=true

# Security para actuator
management.endpoints.web.base-path=/actuator
management.server.port=${SERVER_PORT:8080}

# =========================
# Jackson Configuration
# =========================
spring.jackson.serialization.indent-output=false
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.time-zone=America/Lima
spring.jackson.default-property-inclusion=non_null

# =========================
# Validation Configuration
# =========================
spring.mvc.throw-exception-if-no-handler-found=true
spring.web.resources.add-mappings=false

# =========================
# CORS Configuration
# =========================
# Configurar con dominios de producción
cors.allowed-origins=${CORS_ALLOWED_ORIGINS:https://sgcultimate.com,https://www.sgcultimate.com}
cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
cors.allowed-headers=Authorization,Content-Type,Accept
cors.allow-credentials=true
cors.max-age=3600

# =========================
# File Upload Configuration
# =========================
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB
upload.dir=${UPLOAD_DIR:/app/uploads}

# =========================
# Data Initialization
# =========================
# No crear datos de prueba en producción
app.data.init.enabled=false
app.data.init.create-admin=false
app.data.init.create-sample-data=false

# =========================
# Security Configuration
# =========================
# Configuraciones de seguridad estrictas
app.security.max-login-attempts=5
app.security.lockout-duration=30
app.security.enable-user-registration=${ENABLE_USER_REGISTRATION:false}
app.security.require-email-verification=true

# =========================
# Cache Configuration
# =========================
spring.cache.type=caffeine
spring.cache.caffeine.spec=maximumSize=1000,expireAfterWrite=3600s
app.cache.enabled=true

# =========================
# Connection Pool Configuration
# =========================
spring.data.mongodb.connection-pool.max-size=100
spring.data.mongodb.connection-pool.min-size=10
spring.data.mongodb.connection-pool.max-wait-time=120000
spring.data.mongodb.connection-pool.max-connection-life-time=0
spring.data.mongodb.connection-pool.max-connection-idle-time=0

# =========================
# OpenAPI/Swagger Configuration
# =========================
# Deshabilitar Swagger en producción por seguridad
springdoc.api-docs.enabled=false
springdoc.swagger-ui.enabled=false

# =========================
# Performance Configuration
# =========================
spring.jmx.enabled=false
spring.main.lazy-initialization=false

# =========================
# SSL/TLS Configuration (si aplica)
# =========================
# server.ssl.enabled=true
# server.ssl.key-store=classpath:keystore.p12
# server.ssl.key-store-password=${SSL_KEY_STORE_PASSWORD}
# server.ssl.key-store-type=PKCS12
# server.ssl.key-alias=sgc-ultimate

# =========================
# Email Configuration (si aplica)
# =========================
spring.mail.host=${MAIL_HOST:smtp.gmail.com}
spring.mail.port=${MAIL_PORT:587}
spring.mail.username=${MAIL_USERNAME}
spring.mail.password=${MAIL_PASSWORD}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=5000
spring.mail.properties.mail.smtp.writetimeout=5000

# =========================
# Monitoring & Metrics
# =========================
management.metrics.enable.jvm=true
management.metrics.enable.process=true
management.metrics.enable.system=true
management.metrics.distribution.percentiles-histogram.http.server.requests=true
